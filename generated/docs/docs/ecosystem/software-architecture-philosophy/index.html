<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["setCookieDomain","*.ory.sh"]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//sqa-web.ory.sh/";_paq.push(["setTrackerUrl",e+"np.php"]),_paq.push(["setSiteId","2"]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.src=e+"js/np.min.js",t.parentNode.insertBefore(p,t)}()</script>
<link rel="search" type="application/opensearchdescription+xml" title="Ory Ecosystem" href="/docs/opensearch.xml"><title data-react-helmet="true">Software Architecture and Philosophy | Ory Ecosystem</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//docs/ecosystem/software-architecture-philosophy"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Software Architecture and Philosophy | Ory Ecosystem"><meta data-react-helmet="true" name="description" content="Ory&#x27;s architecture is designed along several guiding principles:"><meta data-react-helmet="true" property="og:description" content="Ory&#x27;s architecture is designed along several guiding principles:"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favico.png"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//docs/ecosystem/software-architecture-philosophy"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//docs/ecosystem/software-architecture-philosophy" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//docs/ecosystem/software-architecture-philosophy" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/docs/assets/css/styles.6b14d864.css">
<link rel="preload" href="/docs/assets/js/runtime~main.d0ab0ee1.js" as="script">
<link rel="preload" href="/docs/assets/js/main.15fa9393.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div id="route-identifier" data-route="/docs/ecosystem/software-architecture-philosophy"><div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">Sign up for <a href="https://ory.us10.list-manage.com/subscribe?u=ffb1a878e4ec6c0ed312a3480&id=f605a41b53">important security announcements</a> and if you like the Ory Ecosystem give us some ‚≠êÔ∏è on <a target="_blank" rel="noopener noreferrer" href="https://github.com/ory">GitHub</a>!</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.ory.sh" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/docs/img/logo-docs.svg" alt="Ory Ecosystem" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo-docs.svg" alt="Ory Ecosystem" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://www.ory.sh/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ory/docs/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/ory/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/docs/">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/ecosystem/software-architecture-philosophy">Next</a></li><li><a class="dropdown__link" href="/docs/versions">All versions</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/">Welcome</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/get-started">Ory Insider Program</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/early-access">Ory Cloud Roadmap</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Start Building</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/docs/reference/api">HTTP API</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Open Source Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/open-source">Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/community">Community</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/projects">Projects</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/versioning">Software Versions and Project Maturity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/configuring">Configuring Ory services</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/upgrading">Software Updates</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/contributing">Contributing</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/sqa">Software Quality Assurance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/ecosystem/roadmap">Roadmap</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/ecosystem/software-architecture-philosophy">Software Architecture and Philosophy</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Open Source Ory Kratos</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Open Source Ory Keto</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Open Source Ory Hydra</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Open Source Ory Oathkeeper</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Software Architecture and Philosophy</h1></header><p>Ory&#x27;s architecture is designed along several guiding principles:</p><ul><li>Minimal dependencies</li><li>Runs everywhere</li><li>Scales without effort</li><li>Minimize room for human and network errors</li></ul><p>Our architecture leans on <a href="https://www.12factor.net" target="_blank" rel="noopener noreferrer">12factor.net principles</a>
and is designed to run best on a Container Orchestration Systems such as
Kubernetes, CloudFoundry, OpenShift, and similar projects. While it is possible
to run the Ory stack on a RaspberryPI, the integration with the Docker and
Container ecosystem is best documented and supported.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="architecture-philosophy"></a>Architecture Philosophy<a class="hash-link" href="#architecture-philosophy" title="Direct link to heading">#</a></h2><p>Our philosophy and assumption of how modern software works is summarized here.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-best-system-dependency-is-no-dependency"></a>The Best System Dependency is no Dependency<a class="hash-link" href="#the-best-system-dependency-is-no-dependency" title="Direct link to heading">#</a></h3><p>The Ory stack does not rely on (operating) system-wide dependencies such as
Java, Apache, or other libraries. The only system-wide dependency you may
encounter is libc / libmusl, required for standard C and POSIX functions when
using SQLite.</p><p>Installing an Ory project is often just one binary away - on any architecture,
and operating system. Our binaries are a couple of MB small and so are the
Docker Images we distribute.</p><p>Ory exposes HTTP(s) ports and configuration of these ports. It does not need a
webserver such as NGINX or Apache HTTP Server.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-platform-is-responsible-for-horizontal-scaling"></a>The Platform is Responsible for Horizontal Scaling<a class="hash-link" href="#the-platform-is-responsible-for-horizontal-scaling" title="Direct link to heading">#</a></h3><p>The Ory stack scales without the need for any additional external service
dependencies (e.g. etcd, Memcached) except for a RDBMS (e.g. PostgreSQL, MySQL).
Scaling horizontally is as easy as starting another process.</p><p>The Ory Ecosystem assumes that the platform it&#x27;s running on (e.g. Kubernetes,
Google Cloud, Amazon Web Services, Azure, ...) is capable of Load Balancing and
does not concern itself with things like Leader Election protocols or other
communicating between process instances of the same project.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="configuration-from-environment-variables-and-configuration-files"></a>Configuration from Environment Variables and Configuration Files<a class="hash-link" href="#configuration-from-environment-variables-and-configuration-files" title="Direct link to heading">#</a></h3><p>The Ory stack uses environment variables (often shortened to env vars or env)
and files as a configuration source. All settings from a configuration file can
also be set using environment variables and vice versa.</p><p>This allows systems like Kubernetes to mount, and update, configuration files
using volume mounts sourced from ConfigMaps and other similar resources.</p><p>Our projects support hot-reloading of configuration files (support for hot
reloading is not yet implemented everywhere).</p><p>Configuration settings are validated using JSON Schema and we try to make it as
difficult as possible to misconfigure our software.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="the-process-is-stateless-and-disposable"></a>The Process is Stateless and Disposable<a class="hash-link" href="#the-process-is-stateless-and-disposable" title="Direct link to heading">#</a></h3><p>Ory processes are stateless and share-nothing. Any data that needs to persist
must be stored in a stateful backing service, typically a RDBMS (SQL) database.</p><p>The processes are disposable, meaning they can be started or stopped at a
moment‚Äôs notice. This facilitates fast elastic scaling, rapid deployment of code
or config changes, and robustness of production deploys.</p><p>The Ory stack strives to minimize startup time, taking no more than a few
milliseconds to be ready. The processes shut down gracefully when they receive a
SIGTERM signal from the process manager. For a web process, graceful shutdown is
achieved by ceasing to listen on the service port (thereby refusing any new
requests), allowing any current requests to finish, and then exiting. Implicit
in this model is that HTTP requests are short (no more than a few seconds), or
in the case of long polling, the client should seamlessly attempt to reconnect
when the connection is lost.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="logs-are-stdout--stderr-streams"></a>Logs are <code>stdout</code> / <code>stderr</code> Streams<a class="hash-link" href="#logs-are-stdout--stderr-streams" title="Direct link to heading">#</a></h4><p>The Ory stack never concerns itself with routing or storage of its output
stream. It does not attempt to write to or manage logfiles. Instead, each
running process writes its event stream, unbuffered, to stdout and stderr.
During local development, the developer will view this stream in the foreground
of their terminal to observe the app‚Äôs behavior.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="maintenance-tasks-run-as-a-one-off-processes"></a>Maintenance tasks run as a one-off processes<a class="hash-link" href="#maintenance-tasks-run-as-a-one-off-processes" title="Direct link to heading">#</a></h3><p>The process formation is the array of processes that are used to do the app‚Äôs
regular business (such as handling web requests) as it runs. Separately,
developers will often wish to do one-off administrative or maintenance tasks for
the app, such as running database migrations (e.g. <code>hydra migrate sql</code>).</p><p>One-off admin processes should be run in an identical environment as the regular
long-running processes of the app. They run against a release, using the same
codebase and config as any process run against that release. Admin code must
ship with application code to avoid synchronization issues.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="external-services-postgresql-mysql--are-attached-resources"></a>External Services (PostgreSQL, MySQL, ...) are Attached Resources<a class="hash-link" href="#external-services-postgresql-mysql--are-attached-resources" title="Direct link to heading">#</a></h3><p>A backing service is any service the app consumes over the network as part of
its normal operation. Examples include datastores (such as MySQL or CouchDB),
messaging/queueing systems (such as RabbitMQ or Beanstalkd), SMTP services for
outbound email (such as Postfix), and caching systems (such as Memcached).</p><p>The Ory code makes no distinction between local and third party services. To the
process, both are attached resources, accessed via a URL or other
locator/credentials stored in the config. A deploy of a Ory project should be
able to swap out a local MySQL database with one managed by a third party (such
as Amazon RDS) without any changes to the app‚Äôs code. Likewise, a local SMTP
server could be swapped with a third-party SMTP service (such as Postmark)
without code changes. In both cases, only the resource handle in the config
needs to change.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="concurrency-as-mandated-by-the-unix-process-model"></a>Concurrency as mandated by the UNIX Process Model<a class="hash-link" href="#concurrency-as-mandated-by-the-unix-process-model" title="Direct link to heading">#</a></h3><p>In the Ory Ecosystem, processes are a first class citizen. Processes take strong
cues from the unix process model for running service daemons. Using this model,
the developer can architect their app to handle diverse workloads by assigning
each type of work to a process type. For example, HTTP requests may be handled
by a web process, and long-running background tasks handled by a worker process.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ory/docs/edit/master/docs/docs/ecosystem/software-architecture-philosophy.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2021-03-29T11:04:01.000Z">3/29/2021</time></b> by <b>Vincent</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/ecosystem/roadmap"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Roadmap</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture-philosophy" class="table-of-contents__link">Architecture Philosophy</a><ul><li><a href="#the-best-system-dependency-is-no-dependency" class="table-of-contents__link">The Best System Dependency is no Dependency</a></li><li><a href="#the-platform-is-responsible-for-horizontal-scaling" class="table-of-contents__link">The Platform is Responsible for Horizontal Scaling</a></li><li><a href="#configuration-from-environment-variables-and-configuration-files" class="table-of-contents__link">Configuration from Environment Variables and Configuration Files</a></li><li><a href="#the-process-is-stateless-and-disposable" class="table-of-contents__link">The Process is Stateless and Disposable</a></li><li><a href="#maintenance-tasks-run-as-a-one-off-processes" class="table-of-contents__link">Maintenance tasks run as a one-off processes</a></li><li><a href="#external-services-postgresql-mysql--are-attached-resources" class="table-of-contents__link">External Services (PostgreSQL, MySQL, ...) are Attached Resources</a></li><li><a href="#concurrency-as-mandated-by-the-unix-process-model" class="table-of-contents__link">Concurrency as mandated by the UNIX Process Model</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright ¬© 2021 ORY GmbH</div></div></div></footer></div></div>
<script src="/docs/assets/js/runtime~main.d0ab0ee1.js"></script>
<script src="/docs/assets/js/main.15fa9393.js"></script>
<noscript><p><img src="//sqa-web.ory.sh/np.php?idsite=2&amp;rec=1" style="border:0;" alt=""></p></noscript></body>
</html>