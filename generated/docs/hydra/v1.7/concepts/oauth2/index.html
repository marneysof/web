<!doctype html>
<html class="docs-version-v1.7" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["setCookieDomain","*.ory.sh"]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//sqa-web.ory.sh/";_paq.push(["setTrackerUrl",e+"np.php"]),_paq.push(["setSiteId","2"]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.src=e+"js/np.min.js",t.parentNode.insertBefore(p,t)}()</script>
<link rel="search" type="application/opensearchdescription+xml" title="ORY Hydra" href="/hydra/docs/opensearch.xml"><title data-react-helmet="true">OAuth 2.0 | ORY Hydra</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//hydra/docs/v1.7/concepts/oauth2"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v1.7"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v1.7"><meta data-react-helmet="true" property="og:title" content="OAuth 2.0 | ORY Hydra"><meta data-react-helmet="true" name="description" content="This section describes on a high level what OAuth 2.0 is and how it works."><meta data-react-helmet="true" property="og:description" content="This section describes on a high level what OAuth 2.0 is and how it works."><link data-react-helmet="true" rel="shortcut icon" href="/hydra/docs/img/favico.png"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//hydra/docs/v1.7/concepts/oauth2"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//hydra/docs/v1.7/concepts/oauth2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//hydra/docs/v1.7/concepts/oauth2" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/hydra/docs/assets/css/styles.9686f6b1.css">
<link rel="preload" href="/hydra/docs/assets/js/runtime~main.a72c9e5d.js" as="script">
<link rel="preload" href="/hydra/docs/assets/js/main.6310b44a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div id="route-identifier" data-route="/hydra/docs/v1.7/concepts/oauth2"><div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">Sign up for <a href="https://ory.us10.list-manage.com/subscribe?u=ffb1a878e4ec6c0ed312a3480&id=f605a41b53&group[17097][8]=1">important security announcements</a> and if you like ORY Hydra give it a ‚≠êÔ∏è on <a target="_blank" rel="noopener noreferrer" href="https://github.com/ory/hydra">GitHub</a>!</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.ory.sh/hydra" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://www.ory.sh/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ory/hydra/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/ory/hydra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/hydra/docs/v1.7/">v1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/hydra/docs/next/concepts/oauth2">Next</a></li><li><a class="dropdown__link" href="/hydra/docs/concepts/oauth2">v1.10</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.9/concepts/oauth2">v1.9</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.8/concepts/oauth2">v1.8</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/hydra/docs/v1.7/concepts/oauth2">v1.7</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.6/concepts/oauth2">v1.6</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.5/">v1.5</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.4/">v1.4</a></li><li><a class="dropdown__link" href="/hydra/docs/versions">All versions</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Concepts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/before-oauth2">Do You Need OAuth2?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hydra/docs/v1.7/concepts/oauth2">OAuth 2.0</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/openid-connect-oidc">OpenID Connect</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/login">Login Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/consent">Consent Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/logout">Logout Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/jwks">JSON Web Key Sets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/limitations">Limitations</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Debug &amp; Help</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">SDKs</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Further Reading</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Kratos</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Oathkeeper</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Keto</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for ORY Hydra <b>v1.7</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/hydra/docs/concepts/oauth2">latest version</a></b> (v1.10).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: v1.7</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>OAuth 2.0</h1></header><p>This section describes on a high level what OAuth 2.0 is and how it works.
Please keep in mind that ORY Hydra is a technology targeted at professionals
using OAuth 2.0 on a regular basis. While we try to cover some of the concepts,
OAuth 2.0 and OpenID knowledge is expected from you in order to understand and
use ORY Hydra to its fullest potential.</p><p>If you are new to these topics we recommend watching the following talk</p><iframe width="560" height="315" src="https://www.youtube.com/embed/996OiexHze0" frameborder="0"></iframe><p>and read these articles:</p><ul><li><a href="https://www.digitalocean.com/community/tutorials/an-introduction-to-oauth-2" target="_blank" rel="noopener noreferrer">DigitalOcean: An Introduction to OAuth 2</a></li><li><a href="https://aaronparecki.com/2012/07/29/2/oauth2-simplified" target="_blank" rel="noopener noreferrer">Aaron Parecki: OAuth2 Simplified</a></li><li><a href="https://zapier.com/learn/apis/chapter-5-authentication-part-2/" target="_blank" rel="noopener noreferrer">Zapier: Chapter 5: Authentication, Part 2</a></li></ul><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you are not building a system that involves third parties - for example a
third party company (CircleCI) using your (GitHub) APIs - but instead are
looking to solve &quot;Single Sign On&quot;, mobile / single page app authentication, or
generally &quot;I want an API token after someone logs in&quot;, take a look at
<a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer">ORY Kratos</a> instead!</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth-20"></a>OAuth 2.0<a class="hash-link" href="#oauth-20" title="Direct link to heading">#</a></h3><p><a href="https://tools.ietf.org/html/rfc6749" target="_blank" rel="noopener noreferrer">The OAuth 2.0 authorization framework</a> is
specified in <a href="https://tools.ietf.org/html/rfc6749" target="_blank" rel="noopener noreferrer">IETF RFC 6749</a>. OAuth 2.0
enables a third-party application to obtain limited access to resources on an
HTTP server on behalf of the owner of those resources.</p><p>Why is this important? Without OAuth 2.0, a resource owner who wants to share
resources in their account with a third party would have to share their
credentials with that third party. As an example, let&#x27;s say you (a resource
owner) have some photos (resources) stored on a social network (the resource
server). Now you want to print them using a third-party printing service. Before
OAuth 2.0 existed, you would have to enter your social network password into the
printing service so that it can access and print your photos. Sharing secret
passwords with third parties is obviously very problematic.</p><p>OAuth addresses this problem by introducing:</p><ul><li>the distinction between resource ownership and resource access for clients</li><li>the ability to define fine-grained access privileges (called OAuth scopes)
instead of full account access for third parties</li><li>an authorization layer and workflow that allows resource owners to grant
particular clients particular types of access to particular resources.</li></ul><p>With OAuth, clients can request access to resources on a server, and the owner
of these resources can grant the requested access together with dedicated
credentials. In our example, you could grant the printing service read-only
access to your photos (only your photos, not your friend list) on the social
network. These credentials come in the form of an access token -- a string
denoting a specific scope, lifetime, and other access attributes. The client
(printing service) can use this access token to request the protected resources
(your photos) from the resource server (the social network).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="terminology"></a>Terminology<a class="hash-link" href="#terminology" title="Direct link to heading">#</a></h3><p>To read more natural, this guide uses simpler terminologies like <em>user</em> instead
of <em>resource owner</em>. Here is a full list of terms.</p><ol><li>A <strong>resource owner</strong> is the user account who authorizes an external
application to access their account. This access is limited (scoped) to
particular actions (the granted &quot;scopes&quot; like read photos or write messages).
This guide refers to resource owners as <em>users</em> or <em>end users</em>.</li><li>The <strong>OAuth 2.0 Authorization Server</strong> implements the OAuth 2.0 protocol (and
optionally OpenID Connect). In our case, this is <strong>ORY Hydra</strong>.</li><li>The <strong>resource provider</strong> is the service that hosts (provides) the resources.
These resources (e.g. blog articles, printers, todo lists) are owned by a
resource owner (user) mentioned above.</li><li>The <strong>OAuth 2.0 Client</strong> is the <em>external application</em> that wants to access a
resource owner&#x27;s resources (read a user&#x27;s images). To do that, it asks the
OAuth 2.0 Authorization Server for an access token in a resource owner&#x27;s
behalf. The authorization server will ask the user if he/she &quot;is ok with&quot;
giving that external application e.g. write access to personal images.</li><li>The <strong>Identity Provider</strong> is a service that allows users to register
accounts, log in, etc.</li><li><strong>User Agent</strong> is usually a browser.</li><li><strong>OpenID Connect</strong> is a protocol built on top of OAuth 2.0 for just
authentication (instead of authorizing access to resources).</li></ol><p>A typical OAuth 2.0 flow looks as follows:</p><ol><li>A developer registers an OAuth 2.0 Client (external application) with the
Authorization Server (ORY Hydra) the intention to obtain information on
behalf of a user.</li><li>The application UI asks the user to authorize the application to access
information/data on his/her behalf.</li><li>The user is redirected to the Authorization Server.</li><li>The Authorization Server confirms the user&#x27;s identity and asks the user to
grant the OAuth 2.0 Client certain permissions.</li><li>The Authorization Server issues tokens that the OAuth 2.0 client uses to
access resources on the user&#x27;s behalf.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth-20-scope"></a>OAuth 2.0 Scope<a class="hash-link" href="#oauth-20-scope" title="Direct link to heading">#</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Please read the section about OAuth2 Scope in
<a href="/hydra/docs/v1.7/concepts/before-oauth2">Read this before learning OAuth2 / OpenID Connect</a>.</p><p>A second important concept is the OAuth 2.0 Scope. Many people confuse OAuth 2.0
Scope with internal Access Control like for example Role Based Access Control
(RBAC) or Access Control Lists (ACL). Both concepts cover different aspects of
access control.</p><p>Internal access control (RBAC, ACL, etc) decides what a user can do in your
system. An administrator might be allowed to modify everything. A regular user
might only be allowed to read their own messages.</p><p>OAuth 2.0 Scopes, on the other hand, describe what a user allowed an external
application (OAuth 2.0 client) to do on his/her behalf. For example, an access
token might grant the external application to see a user&#x27;s pictures, but not
upload new pictures on his/her behalf (which we assume a user could do herself).</p><p>In an extreme case, the user could lie and grant an external application OAuth
scopes that he himself doesn&#x27;t have permission to (&quot;read all classified
documents&quot;). The OAuth Access Token with those scopes wouldn&#x27;t help the external
application read those documents because it can only act in the name of the
user, and that user doesn&#x27;t have these access privileges.</p><p>The scope of an OAuth 2.0 scope defines the permission the token was granted by
the end-user. For example, a specific token might be allowed to access public
pictures, but not private ones. The granted permissions are established during
the consent screen.</p><p>ORY Hydra has pre-defined OAuth 2.0 Scope values:</p><ul><li><code>offline_access</code>: Include this scope if you wish to receive a refresh token</li><li><code>openid</code>: Include this scope if you wish to perform an OpenID Connect request.</li></ul><p>When performing an OAuth 2.0 Flow where the end-user is involved (e.g. Implicit
or Authorize Code), the granted OAuth 2.0 Scope must be set when accepting the
consent using the <code>grant_scope</code> key.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth-20-access-token-audience"></a>OAuth 2.0 Access Token Audience<a class="hash-link" href="#oauth-20-access-token-audience" title="Direct link to heading">#</a></h3><p>The Audience of an Access Token refers to the Resource Servers that this token
is intended for. The audience usually refers to one or more URLs such as</p><ul><li><code>https://api.mydomain.com/blog/posts</code></li><li><code>https://api.mydomain.com/users</code></li></ul><p>but may also refer to a subset of resources:</p><ul><li><code>https://api.mydomain.com/tenants/foo/users</code></li></ul><p>When performing an OAuth 2.0 Flow where the end-user is involved (e.g. Implicit
or Authorize Code), the granted audience must be set when accepting the consent
using the <code>grant_access_token_audience</code> key. In most cases, it is ok to grant
the audience without user-interaction.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth-20-refresh-tokens"></a>OAuth 2.0 Refresh Tokens<a class="hash-link" href="#oauth-20-refresh-tokens" title="Direct link to heading">#</a></h3><p>OAuth 2.0 Refresh Tokens are issued only when an Authorize Code Flow
(<code>response_type=code</code>) or an OpenID Connect Hybrid Flow with an Authorize Code
Response Type (<code>response_type=code+...</code>) is executed. OAuth 2.0 Refresh Tokens
are not returned for Implicit or Client Credentials grants:</p><p>Capable of issuing an OAuth 2.0 Refresh Token:</p><ul><li><a href="https://ory-hydra.example/oauth2/auth?response_type=code&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=code&amp;</a>...</li><li><a href="https://ory-hydra.example/oauth2/auth?response_type=code+token&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=code+token&amp;</a>...</li><li><a href="https://ory-hydra.example/oauth2/auth?response_type=code+token+id_token&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=code+token+id_token&amp;</a>...</li><li><a href="https://ory-hydra.example/oauth2/auth?response_type=code+id_token&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=code+id_token&amp;</a>...</li></ul><p>Will not issue an OAuth 2.0 Refresh Token:</p><ul><li><a href="https://ory-hydra.example/oauth2/auth?response_type=token&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=token&amp;</a>...</li><li><a href="https://ory-hydra.example/oauth2/auth?response_type=token+id_token&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/auth?response_type=token+id_token&amp;</a>...</li><li><a href="https://ory-hydra.example/oauth2/token?grant_type=client_redentials&amp;" target="_blank" rel="noopener noreferrer">https://ory-hydra.example/oauth2/token?grant_type=client_redentials&amp;</a>...</li></ul><p>Additionally, each OAuth 2.0 Client that wants to request an OAuth 2.0 Refresh
Token must be allowed to request scope <code>offline_access</code>. When performing an
OAuth 2.0 Authorize Code Flow, the <code>offline_access</code> value must be included in
the requested OAuth 2.0 Scope:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">https://authorization-server.com/auth</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> &amp;scope=offline_access</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> ?response_type=code</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> &amp;client_id=...</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> &amp;redirect_uri=...</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> &amp;state=...</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When <a href="/hydra/docs/v1.7/concepts/consent">accepting the consent request</a>, <code>offline_access</code> must be in the
list of <code>grant_scope</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">fetch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;https://hydra/oauth2/auth/requests/consent/accept?challenge=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encodeURIComponent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">challenge</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    method</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;PUT&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    headers</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Content-Type&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;application/json&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    grant_scope</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;offline_access&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Refresh Token Lifespan can be set using configuration key <code>ttl.refresh_token</code>.
If set to -1, Refresh Tokens never expire.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="oauth-20-token-introspection"></a>OAuth 2.0 Token Introspection<a class="hash-link" href="#oauth-20-token-introspection" title="Direct link to heading">#</a></h3><p>OAuth2 Token Introspection is an <a href="https://tools.ietf.org/html/rfc7662" target="_blank" rel="noopener noreferrer">IETF</a>
standard. It defines a method for a protected resource to query an OAuth 2.0
authorization server to determine the active state of an OAuth 2.0 token and to
determine meta-information about this token. OAuth 2.0 deployments can use this
method to convey information about the authorization context of the token from
the authorization server to the protected resource.</p><p>The usage of an access token or client credentials is required to access the
endpoint. ORY Hydra will however accept any valid token or valid credentials as
there is no built-in access control.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ory/hydra/edit/master/docs/versioned_docs/version-v1.7/concepts/oauth2.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2020-08-14T12:22:52.000Z">8/14/2020</time></b> by <b>aeneasr</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/hydra/docs/v1.7/concepts/before-oauth2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Do You Need OAuth2?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/hydra/docs/v1.7/concepts/openid-connect-oidc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OpenID Connect ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#oauth-20" class="table-of-contents__link">OAuth 2.0</a></li><li><a href="#terminology" class="table-of-contents__link">Terminology</a></li><li><a href="#oauth-20-scope" class="table-of-contents__link">OAuth 2.0 Scope</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright ¬© 2021 ORY GmbH</div></div></div></footer></div></div>
<script src="/hydra/docs/assets/js/runtime~main.a72c9e5d.js"></script>
<script src="/hydra/docs/assets/js/main.6310b44a.js"></script>
<noscript><p><img src="//sqa-web.ory.sh/np.php?idsite=2&amp;rec=1" style="border:0;" alt=""></p></noscript></body>
</html>